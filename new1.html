<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Viewer</title>
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #modelContainer {
            width: 80%;
            height: 400px;
            background: #f0f0f0;
            margin-top: 20px;
        }

        #imageButtons {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        #imageButtons img {
            width: 100px;
            height: 100px;
            margin: 0 10px;
            cursor: pointer;
            transition: transform 0.3s;
        }

        #imageButtons img:hover {
            transform: scale(1.1);
        }
    </style>

    <!-- 使用 importmap 来指定 Three.js 和 OrbitControls 的路径 -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.138.0/build/three.module.js",
                "OrbitControls": "https://unpkg.com/three@0.138.0/examples/jsm/controls/OrbitControls.js",
                "OBJLoader": "https://unpkg.com/three@0.138.0/examples/jsm/loaders/OBJLoader.js",
                "MTLLoader": "https://unpkg.com/three@0.138.0/examples/jsm/loaders/MTLLoader.js"
            }
        }
    </script>
</head>

<body>
    <!-- 3D 模型展示区域 -->
    <div id="modelContainer"></div>

    <!-- 按钮区域，包含四个图片按钮 -->
    <div id="imageButtons">
        <img src="images/baozi.png" alt="Model 1" data-model="baozi_cage_full.obj" data-material="baozi_cage_full.mtl">
        <img src="images/pig_baozi.png" alt="Model 2" data-model="pig_cage_full.obj" data-material="pig_cage_full.mtl">
        <img src="images/chaji.png" alt="Model 3" data-model="chaji6.obj" data-material="chaji6.mtl">
        <img src="images/panda.png" alt="Model 4" data-model="panda.obj" data-material="panda.mtl">
    </div>

    <!-- 引入 modelViewer.js 文件 -->
    <script type="module">
        import { initModelViewer } from './js/modelViewer.js';

        // 初始化 3D 模型查看器
        let currentModel = null;  // 当前加载的模型
        const modelContainer = document.getElementById('modelContainer');

        // 初始化并加载第一个模型
        initModelViewer('modelContainer', './assets/model1.obj', './assets/model1.mtl');

        // 获取所有图片按钮
        const imageButtons = document.querySelectorAll('#imageButtons img');

        // 添加点击事件监听器
        imageButtons.forEach(img => {
            img.addEventListener('click', () => {
                const modelPath = img.getAttribute('data-model');
                const materialPath = img.getAttribute('data-material');

                // 清空当前容器内容
                modelContainer.innerHTML = '';

                // 加载新模型
                initModelViewer('modelContainer', `./models/${modelPath}`, `./models/${materialPath}`);
            });
        });
    </script>
</body>

</html>